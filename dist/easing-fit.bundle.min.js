(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){var fitCurve,round,sampleFunc,fit,toKeyframes;fitCurve=require("fit-curve");round=function(n,d){var p,ret;d==null&&(d=5);p=Math.pow(10,d);ret=(Math.round(n*p)/p+"").split(".");return+(ret[0]+(ret[1]?"."+ret[1].substring(0,d):""))};sampleFunc=function(t){return Math.abs(Math.sin(Math.pow(3*t+1.77,2))/(Math.pow(3*t+2,5*t)+1))};fit=function(func,options){var ref$,ox,oy,dy,count,segments,i$,to$,x,y,points,segIdx,seg,cur,j$,step$,to1$,py,keyframes,len$,ps,curves,len1$,curve,x1,x2,y1,y2,ncurve,k$,j;options==null&&(options={});options=import$({precision:1e-4,sampleCount:5,errorThreshold:.1,start:0,end:1},options);ref$=[options.start,0,1,0,[]],ox=ref$[0],oy=ref$[1],dy=ref$[2],count=ref$[3],segments=ref$[4];for(i$=options.start,to$=options.end;i$<=to$;i$+=1e-4){x=i$;y=func(x);if(count>2&&Math.sign(y-oy)*Math.sign(dy)<0){segments.push([ox,x]);ox=x}dy=y-oy;oy=y;count=count+1}segments.push([ox,options.end]);points=[];for(i$=0,to$=segments.length;i$<to$;++i$){segIdx=i$;seg=segments[segIdx];cur=[];for(j$=seg[0],to1$=seg[1],step$=(seg[1]-seg[0])/options.sampleCount;step$<0?j$>=to1$:j$<=to1$;j$+=step$){x=j$;y=Math.round(func(x)*1e3)/1e3;cur.push([Math.round(1e3*x)*.001,Math.round(1e3*y)*.001])}points.push(cur)}py=NaN;keyframes=[];for(i$=0,len$=points.length;i$<len$;++i$){ps=points[i$];curves=fitCurve(ps,options.errorThreshold);for(j$=0,len1$=curves.length;j$<len1$;++j$){curve=curves[j$];x1=curve[0][0];x2=curve[3][0];y1=curve[0][1];y2=curve[3][1];ncurve=[];if(Math.abs(y1-py)<.5*.01){continue}py=y1;for(k$=0;k$<4;++k$){j=k$;ncurve.push([Math.round((curve[j][0]-x1)/(x2-x1)/options.precision)*options.precision,Math.round((curve[j][1]-y1)/(y2-y1)/options.precision)*options.precision])}keyframes.push({percent:round(x1*100),value:y1,cubicBezier:[ncurve[1][0],ncurve[1][1],ncurve[2][0],ncurve[2][1]].map(fn$)})}}keyframes.push({percent:options.end*100,value:y2});return keyframes;function fn$(it){return round(it)}};toKeyframes=function(keyframes,options){options==null&&(options={});options=import$({propFunc:function(it){return['content: "'+it.value+'" ']},name:null,format:"stylus"},options||{});return new Promise(function(res,rej){var str,i$,ref$,len$,keyframe;str=options.name?["@keyframes "+options.name]:[];if(options.format==="css"){str=str.concat("{");for(i$=0,len$=(ref$=keyframes).length;i$<len$;++i$){keyframe=ref$[i$];str=str.concat(["  "+keyframe.percent+"% {",keyframe.cubicBezier?"     animation-timing-function: cubic-bezier("+keyframe.cubicBezier.join(",")+")":void 8,"  }"].filter(fn$).concat(options.propFunc(keyframe).map(fn1$)))}str=str.concat("}");str=str.join("\n")}else{for(i$=0,len$=(ref$=keyframes).length;i$<len$;++i$){keyframe=ref$[i$];str=str.concat(["  "+keyframe.percent+"%",keyframe.cubicBezier?"    animation-timing-function: cubic-bezier("+keyframe.cubicBezier.join(",")+")":void 8].filter(fn2$).concat(options.propFunc(keyframe).map(fn3$)))}str=str.join("\n")}return res(str);function fn$(it){return it}function fn1$(it){return"    "+it}function fn2$(it){return it}function fn3$(it){return"    "+it}})};module.exports={fit:fit,toKeyframes:toKeyframes,sampleFunc:sampleFunc,round:round};function import$(obj,src){var own={}.hasOwnProperty;for(var key in src)if(own.call(src,key))obj[key]=src[key];return obj}},{"fit-curve":2}],2:[function(require,module,exports){(function(global,factory){if(typeof define==="function"&&define.amd){define(["module"],factory)}else if(typeof exports!=="undefined"){factory(module)}else{var mod={exports:{}};factory(mod);global.fitCurve=mod.exports}})(this,function(module){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function fitCurve(points,maxError,progressCallback){if(!Array.isArray(points)){throw new TypeError("First argument should be an array")}points.forEach(function(point){if(!Array.isArray(point)||point.length!==2||typeof point[0]!=="number"||typeof point[1]!=="number"){throw Error("Each point should be an array of two numbers")}});points=points.filter(function(point,i){return i===0||!(point[0]===points[i-1][0]&&point[1]===points[i-1][1])});if(points.length<2){return[]}var len=points.length;var leftTangent=createTangent(points[1],points[0]);var rightTangent=createTangent(points[len-2],points[len-1]);return fitCubic(points,leftTangent,rightTangent,maxError,progressCallback)}function fitCubic(points,leftTangent,rightTangent,error,progressCallback){var MaxIterations=20;var bezCurve,u,uPrime,maxError,prevErr,splitPoint,prevSplit,centerVector,toCenterTangent,fromCenterTangent,beziers,dist,i;if(points.length===2){dist=maths.vectorLen(maths.subtract(points[0],points[1]))/3;bezCurve=[points[0],maths.addArrays(points[0],maths.mulItems(leftTangent,dist)),maths.addArrays(points[1],maths.mulItems(rightTangent,dist)),points[1]];return[bezCurve]}u=chordLengthParameterize(points);var _generateAndReport=generateAndReport(points,u,u,leftTangent,rightTangent,progressCallback);bezCurve=_generateAndReport[0];maxError=_generateAndReport[1];splitPoint=_generateAndReport[2];if(maxError<error){return[bezCurve]}if(maxError<error*error){uPrime=u;prevErr=maxError;prevSplit=splitPoint;for(i=0;i<MaxIterations;i++){uPrime=reparameterize(bezCurve,points,uPrime);var _generateAndReport2=generateAndReport(points,u,uPrime,leftTangent,rightTangent,progressCallback);bezCurve=_generateAndReport2[0];maxError=_generateAndReport2[1];splitPoint=_generateAndReport2[2];if(maxError<error){return[bezCurve]}else if(splitPoint===prevSplit){var errChange=maxError/prevErr;if(errChange>.9999&&errChange<1.0001){break}}prevErr=maxError;prevSplit=splitPoint}}beziers=[];centerVector=maths.subtract(points[splitPoint-1],points[splitPoint+1]);if(centerVector[0]===0&&centerVector[1]===0){centerVector=maths.subtract(points[splitPoint-1],points[splitPoint]).reverse();centerVector[0]=-centerVector[0]}toCenterTangent=maths.normalize(centerVector);fromCenterTangent=maths.mulItems(toCenterTangent,-1);beziers=beziers.concat(fitCubic(points.slice(0,splitPoint+1),leftTangent,toCenterTangent,error,progressCallback));beziers=beziers.concat(fitCubic(points.slice(splitPoint),fromCenterTangent,rightTangent,error,progressCallback));return beziers}function generateAndReport(points,paramsOrig,paramsPrime,leftTangent,rightTangent,progressCallback){var bezCurve,maxError,splitPoint;bezCurve=generateBezier(points,paramsPrime,leftTangent,rightTangent,progressCallback);var _computeMaxError=computeMaxError(points,bezCurve,paramsOrig);maxError=_computeMaxError[0];splitPoint=_computeMaxError[1];if(progressCallback){progressCallback({bez:bezCurve,points:points,params:paramsOrig,maxErr:maxError,maxPoint:splitPoint})}return[bezCurve,maxError,splitPoint]}function generateBezier(points,parameters,leftTangent,rightTangent){var bezCurve,A,a,C,X,det_C0_C1,det_C0_X,det_X_C1,alpha_l,alpha_r,epsilon,segLength,i,len,tmp,u,ux,firstPoint=points[0],lastPoint=points[points.length-1];bezCurve=[firstPoint,null,null,lastPoint];A=maths.zeros_Xx2x2(parameters.length);for(i=0,len=parameters.length;i<len;i++){u=parameters[i];ux=1-u;a=A[i];a[0]=maths.mulItems(leftTangent,3*u*(ux*ux));a[1]=maths.mulItems(rightTangent,3*ux*(u*u))}C=[[0,0],[0,0]];X=[0,0];for(i=0,len=points.length;i<len;i++){u=parameters[i];a=A[i];C[0][0]+=maths.dot(a[0],a[0]);C[0][1]+=maths.dot(a[0],a[1]);C[1][0]+=maths.dot(a[0],a[1]);C[1][1]+=maths.dot(a[1],a[1]);tmp=maths.subtract(points[i],bezier.q([firstPoint,firstPoint,lastPoint,lastPoint],u));X[0]+=maths.dot(a[0],tmp);X[1]+=maths.dot(a[1],tmp)}det_C0_C1=C[0][0]*C[1][1]-C[1][0]*C[0][1];det_C0_X=C[0][0]*X[1]-C[1][0]*X[0];det_X_C1=X[0]*C[1][1]-X[1]*C[0][1];alpha_l=det_C0_C1===0?0:det_X_C1/det_C0_C1;alpha_r=det_C0_C1===0?0:det_C0_X/det_C0_C1;segLength=maths.vectorLen(maths.subtract(firstPoint,lastPoint));epsilon=1e-6*segLength;if(alpha_l<epsilon||alpha_r<epsilon){bezCurve[1]=maths.addArrays(firstPoint,maths.mulItems(leftTangent,segLength/3));bezCurve[2]=maths.addArrays(lastPoint,maths.mulItems(rightTangent,segLength/3))}else{bezCurve[1]=maths.addArrays(firstPoint,maths.mulItems(leftTangent,alpha_l));bezCurve[2]=maths.addArrays(lastPoint,maths.mulItems(rightTangent,alpha_r))}return bezCurve}function reparameterize(bezier,points,parameters){return parameters.map(function(p,i){return newtonRaphsonRootFind(bezier,points[i],p)})}function newtonRaphsonRootFind(bez,point,u){var d=maths.subtract(bezier.q(bez,u),point),qprime=bezier.qprime(bez,u),numerator=maths.mulMatrix(d,qprime),denominator=maths.sum(maths.addItems(maths.squareItems(qprime),maths.mulMatrix(d,bezier.qprimeprime(bez,u))));if(denominator===0){return u}else{return u-numerator/denominator}}function chordLengthParameterize(points){var u=[],currU,prevU,prevP;points.forEach(function(p,i){currU=i?prevU+maths.vectorLen(maths.subtract(p,prevP)):0;u.push(currU);prevU=currU;prevP=p});u=u.map(function(x){return x/prevU});return u}function computeMaxError(points,bez,parameters){var dist,maxDist,splitPoint,v,i,count,point,t;maxDist=0;splitPoint=points.length/2;var t_distMap=mapTtoRelativeDistances(bez,10);for(i=0,count=points.length;i<count;i++){point=points[i];t=find_t(bez,parameters[i],t_distMap,10);v=maths.subtract(bezier.q(bez,t),point);dist=v[0]*v[0]+v[1]*v[1];if(dist>maxDist){maxDist=dist;splitPoint=i}}return[maxDist,splitPoint]}var mapTtoRelativeDistances=function mapTtoRelativeDistances(bez,B_parts){var B_t_curr;var B_t_dist=[0];var B_t_prev=bez[0];var sumLen=0;for(var i=1;i<=B_parts;i++){B_t_curr=bezier.q(bez,i/B_parts);sumLen+=maths.vectorLen(maths.subtract(B_t_curr,B_t_prev));B_t_dist.push(sumLen);B_t_prev=B_t_curr}B_t_dist=B_t_dist.map(function(x){return x/sumLen});return B_t_dist};function find_t(bez,param,t_distMap,B_parts){if(param<0){return 0}if(param>1){return 1}var lenMax,lenMin,tMax,tMin,t;for(var i=1;i<=B_parts;i++){if(param<=t_distMap[i]){tMin=(i-1)/B_parts;tMax=i/B_parts;lenMin=t_distMap[i-1];lenMax=t_distMap[i];t=(param-lenMin)/(lenMax-lenMin)*(tMax-tMin)+tMin;break}}return t}function createTangent(pointA,pointB){return maths.normalize(maths.subtract(pointA,pointB))}var maths=function(){function maths(){_classCallCheck(this,maths)}maths.zeros_Xx2x2=function zeros_Xx2x2(x){var zs=[];while(x--){zs.push([0,0])}return zs};maths.mulItems=function mulItems(items,multiplier){return[items[0]*multiplier,items[1]*multiplier]};maths.mulMatrix=function mulMatrix(m1,m2){return m1[0]*m2[0]+m1[1]*m2[1]};maths.subtract=function subtract(arr1,arr2){return[arr1[0]-arr2[0],arr1[1]-arr2[1]]};maths.addArrays=function addArrays(arr1,arr2){return[arr1[0]+arr2[0],arr1[1]+arr2[1]]};maths.addItems=function addItems(items,addition){return[items[0]+addition,items[1]+addition]};maths.sum=function sum(items){return items.reduce(function(sum,x){return sum+x})};maths.dot=function dot(m1,m2){return maths.mulMatrix(m1,m2)};maths.vectorLen=function vectorLen(v){var a=v[0],b=v[1];return Math.sqrt(a*a+b*b)};maths.divItems=function divItems(items,divisor){return[items[0]/divisor,items[1]/divisor]};maths.squareItems=function squareItems(items){var a=items[0],b=items[1];return[a*a,b*b]};maths.normalize=function normalize(v){return this.divItems(v,this.vectorLen(v))};return maths}();var bezier=function(){function bezier(){_classCallCheck(this,bezier)}bezier.q=function q(ctrlPoly,t){var tx=1-t;var pA=maths.mulItems(ctrlPoly[0],tx*tx*tx),pB=maths.mulItems(ctrlPoly[1],3*tx*tx*t),pC=maths.mulItems(ctrlPoly[2],3*tx*t*t),pD=maths.mulItems(ctrlPoly[3],t*t*t);return maths.addArrays(maths.addArrays(pA,pB),maths.addArrays(pC,pD))};bezier.qprime=function qprime(ctrlPoly,t){var tx=1-t;var pA=maths.mulItems(maths.subtract(ctrlPoly[1],ctrlPoly[0]),3*tx*tx),pB=maths.mulItems(maths.subtract(ctrlPoly[2],ctrlPoly[1]),6*tx*t),pC=maths.mulItems(maths.subtract(ctrlPoly[3],ctrlPoly[2]),3*t*t);return maths.addArrays(maths.addArrays(pA,pB),pC)};bezier.qprimeprime=function qprimeprime(ctrlPoly,t){return maths.addArrays(maths.mulItems(maths.addArrays(maths.subtract(ctrlPoly[2],maths.mulItems(ctrlPoly[1],2)),ctrlPoly[0]),6*(1-t)),maths.mulItems(maths.addArrays(maths.subtract(ctrlPoly[3],maths.mulItems(ctrlPoly[2],2)),ctrlPoly[1]),6*t))};return bezier}();module.exports=fitCurve})},{}]},{},[1]);
